<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paws&Co - Каталог кормов</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo-container">
            <div class="rainbow-border">
                <img src="Paws-black.png" alt="Paws&Co Logo" class="logo">
            </div>
        </div>
        <h1>Paws&Co</h1>
        <p>Грумминг салон и зоомагазин для ваших любимцев</p>
        <div class="social-links">
                <a href="#" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
            </div>
    </header>

    <nav>
        <ul>
            <li><a href="#dog-food">Корм для собак</a></li>
            <li><a href="#cat-food">Корм для кошек</a></li>
            <li><a href="#treats">Лакомства</a></li>
            <li><a href="#contact">Контакты</a></li>
        </ul>
    </nav>

    <div class="container">
        <!-- Секция Корм для собак -->
<h2 class="section-title" id="dog-food">Корм для собак</h2>

<div class="category-tabs">
    <div class="category-tab active">Все</div>
    <div class="category-tab">Monge</div>
    <div class="category-tab">Taste of the Wild</div>
    <div class="category-tab">Bwild</div>
</div>

<div class="product-grid">
    <!-- Monge для собак -->
    <div class="product-card" data-sub-category="monge">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-all-breeds-puppy-junior-jagnjetina-2-5-kg-3.jpg" alt="Monge All Breeds Puppy">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge All Breeds Puppy</h3>
            <p class="product-description">Сухой корм для щенков с ягненком и рисом, 2.5 кг</p>
            <p class="product-price">1100 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <div class="product-card" data-sub-category="monge">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-all-breeds-adult-losos-2-5kg.jpg" alt="Monge All Breeds Adult">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge All Breeds Adult</h3>
            <p class="product-description">Сухой корм для взрослых собак с лососем и рисом, 2.5 кг</p>
            <p class="product-price">1200 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <!-- Taste of the Wild -->
    <div class="product-card" data-sub-category="taste-of-the-wild">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/taste-of-the-wild-sierra-mountain-2-kg.jpg" alt="Taste of the Wild Sierra Mountain">
        </div>
        <div class="product-info">
            <h3 class="product-title">Taste of the Wild Sierra Mountain</h3>
            <p class="product-description">Сухой корм с ягненком для собак всех пород, 2 кг</p>
            <p class="product-price">1520 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <div class="product-card" data-sub-category="taste-of-the-wild">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/taste-of-the-wild-high-prairie-2-kg-1.jpg" alt="Taste of the Wild High Prairie">
        </div>
        <div class="product-info">
            <h3 class="product-title">Taste of the Wild High Prairie</h3>
            <p class="product-description">Сухой корм с олениной и бизоном для собак, 2 кг</p>
            <p class="product-price">1520 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <!-- BWild -->
    <div class="product-card" data-sub-category="bwild">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-bwild-grain-free-adult-all-breeds-divljac-2-5-kg-3.jpg" alt="Monge BWild Grain Free">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge BWild Grain Free</h3>
            <p class="product-description">Беззерновой корм для собак с ягненком, 2.5 кг</p>
            <p class="product-price">1800 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>
</div>

<!-- Секция Корм для кошек -->
<h2 class="section-title" id="cat-food">Корм для кошек</h2>

<div class="category-tabs">
    <div class="category-tab active">Все</div>
    <div class="category-tab">Сухой корм</div>
    <div class="category-tab">Влажный корм</div>
    <div class="category-tab">Для стерилизованных</div>
</div>

<div class="product-grid">
    <!-- Сухой корм для кошек -->
    <div class="product-card" data-sub-category="dry">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-cat-adult-losos-1-5-kg.jpg" alt="Monge Cat Adult">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge Cat Adult</h3>
            <p class="product-description">Сухой корм для взрослых кошек с лососем, 1.5 кг</p>
            <p class="product-price">950 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <div class="product-card" data-sub-category="dry">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-cat-indoor-1-5-kg-1.jpg" alt="Monge Cat Indoor">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge Cat Indoor</h3>
            <p class="product-description">Сухой корм для домашних кошек, 1.5 кг</p>
            <p class="product-price">870 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <!-- Влажный корм для кошек -->
    <div class="product-card" data-sub-category="wet">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-bwild-vlazna-hrana-steril-pastrmka-85-g.jpg" alt="Monge BWild Steril">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge BWild Steril</h3>
            <p class="product-description">Влажный корм для стерилизованных кошек с форелью, 85 г</p>
            <p class="product-price">75 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <!-- Для стерилизованных кошек -->
    <div class="product-card" data-sub-category="medical">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-cat-sterilised-1-5-kg.jpg" alt="Monge Cat Sterilised">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge Cat Sterilised</h3>
            <p class="product-description">Сухой корм для стерилизованных кошек, 1.5 кг</p>
            <p class="product-price">810 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>
</div>

<!-- Секция Лакомства -->
<h2 class="section-title" id="treats">Лакомства</h2>

<div class="category-tabs">
    <div class="category-tab active">Все</div>
    <div class="category-tab">Для собак</div>
    <div class="category-tab">Для кошек</div>
    <div class="category-tab">Monge</div>
</div>

<div class="product-grid">
    <!-- Лакомства для собак -->
    <div class="product-card" data-sub-category="dog-treats">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-mini-sensitive-digestion-lamb-with-chestnut-45-g.jpg" alt="Monge Mini Sensitive">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge Mini Sensitive</h3>
            <p class="product-description">Лакомство для собак с ягненком и каштаном, 45 г</p>
            <p class="product-price">210 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <div class="product-card" data-sub-category="dog-treats">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-immunity-support-rabbit-with-nucleotides-45-g.jpg" alt="Monge Immunity Support">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge Immunity Support</h3>
            <p class="product-description">Лакомство для собак с кроликом, 45 г</p>
            <p class="product-price">210 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <!-- Лакомства для кошек -->
    <div class="product-card" data-sub-category="cat-treats">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/2021/12/20211217_141724_monge-sterilised-duck-with-lemon-balm-50-g-1-e1639748258323.jpg" alt="Monge Sterilised Duck">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge Sterilised Duck</h3>
            <p class="product-description">Лакомство для стерилизованных кошек с уткой, 50 г</p>
            <p class="product-price">220 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <!-- Лакомства Monge -->
    <div class="product-card" data-sub-category="monge">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/monge-training-duck-with-spiruline-45-g-1.jpg" alt="Monge Training Duck">
        </div>
        <div class="product-info">
            <h3 class="product-title">Monge Training Duck</h3>
            <p class="product-description">Тренировочное лакомство для собак с уткой, 45 г</p>
            <p class="product-price">210 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>
</div>

<!-- Новая секция Игрушки -->
<h2 class="section-title" id="toys">Игрушки</h2>

<div class="category-tabs">
    <div class="category-tab active">Все</div>
    <div class="category-tab">Для собак</div>
    <div class="category-tab">Для кошек</div>
    <div class="category-tab">Мячики</div>
</div>

<div class="product-grid">
    <div class="product-card" data-sub-category="dog-toys">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/fl523923.jpg" alt="Flamingo Rugby">
        </div>
        <div class="product-info">
            <h3 class="product-title">Flamingo Ruggo Latex Rugby</h3>
            <p class="product-description">Латексная игрушка для собак в форме мяча для регби, ассортимент</p>
            <p class="product-price">850 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <div class="product-card" data-sub-category="balls">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/fl560777-1.jpg" alt="Flamingo Ball">
        </div>
        <div class="product-info">
            <h3 class="product-title">Flamingo Fay Ball 4cm</h3>
            <p class="product-description">Игрушка-мячик для животных, диаметр 4 см, ассортимент</p>
            <p class="product-price">150 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <div class="product-card" data-sub-category="dog-toys">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/dv-igra%C4%8Dka-pas-mix.jpg" alt="DV Игрушка для собак">
        </div>
        <div class="product-info">
            <h3 class="product-title">DV Igracka latex pas mix</h3>
            <p class="product-description">Латексная игрушка для собак, 8.5 см, ассортимент</p>
            <p class="product-price">320 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <div class="product-card" data-sub-category="balls">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/fl524070.jpg" alt="Flamingo Bounca Ball">
        </div>
        <div class="product-info">
            <h3 class="product-title">Flamingo Bounca Ball</h3>
            <p class="product-description">Прыгающий мячик для собак, 6.3 см</p>
            <p class="product-price">150 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>
</div>

<!-- Новая секция Уход -->
<h2 class="section-title" id="grooming">Средства по уходу</h2>

<div class="category-tabs">
    <div class="category-tab active">Все</div>
    <div class="category-tab">Шампуни</div>
    <div class="category-tab">Спреи</div>
    <div class="category-tab">Аксессуары</div>
</div>

<div class="product-grid">
    <div class="product-card" data-sub-category="sprays">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/h695.jpg" alt="Artero Mix">
        </div>
        <div class="product-info">
            <h3 class="product-title">Artero Mix</h3>
            <p class="product-description">Многофункциональный спрей-кондиционер для шерсти, 250 мл</p>
            <p class="product-price">1960 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <div class="product-card" data-sub-category="sprays">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/d126088.jpg" alt="Dezynadog Detangling">
        </div>
        <div class="product-info">
            <h3 class="product-title">Dezynadog Detangling</h3>
            <p class="product-description">Спрей против спутывания шерсти, 250 мл</p>
            <p class="product-price">1470 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>

    <div class="product-card" data-sub-category="shampoos">
        <div class="product-image">
            <img src="https://cdn-img.pethouse.rs/products/h727.jpg" alt="Artero Detox">
        </div>
        <div class="product-info">
            <h3 class="product-title">Artero Detox</h3>
            <p class="product-description">Маска для шерсти с активированным углем, 100 мл</p>
            <p class="product-price">1510 ₽</p>
            <button class="btn">Заказать</button>
        </div>
    </div>
</div>
    </div>

    <div class="cart-container">
    <div class="cart-icon" id="cart-icon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cart-count">0</span>
    </div>
    <div class="cart-dropdown" id="cart-dropdown">
        <div class="cart-header">
            <h3>Корзина</h3>
            <button class="close-cart" id="close-cart">&times;</button>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Здесь будут отображаться товары в корзине -->
            <div class="empty-cart-message">Корзина пуста</div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Итого:</span>
                <span id="cart-total-price">0 ₽</span>
            </div>
            <button class="btn btn-accent" id="checkout-btn">Оформить заказ</button>
        </div>
    </div>
</div>

    <footer id="contact">
        <h3>Paws&Co - Грумминг салон и зоомагазин</h3>
        <div class="contact-info">
            <p>Адрес: Brane Crnojevica 9, Beograd</p>
            <p>Телефон: +381 69 1032-439</p>
            <p>Email: pawsco@gmail.com</p>
            <p>Часы работы: 11:00 - 19:00, без выходных</p>
        </div>
        <a href="main.html" class="btn btn-accent">На главную страницу</a>
        <p style="margin-top: 2rem;">© 2025 Paws&Co. Все права защищены.</p>
    </footer>

    <!-- HTML для модального окна оформления заказа -->
<div class="modal-overlay" id="checkout-modal">
    <div class="modal-container">
        <div class="modal-header">
            <h3>Оформление заказа</h3>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <form id="checkout-form">
                <div class="form-group">
                    <label for="customer-name">Имя</label>
                    <input type="text" id="customer-name" required placeholder="Введите ваше имя">
                </div>
                <div class="form-group">
                    <label for="customer-phone">Телефон</label>
                    <input type="tel" id="customer-phone" required placeholder="Введите ваш телефон">
                </div>
                <div class="form-group">
                    <label for="customer-address">Адрес</label>
                    <textarea id="customer-address" rows="3" placeholder="Введите ваш адрес (если выберете доставку)"></textarea>
                </div>
                <div class="delivery-options">
                    <h4>Способ получения</h4>
                    <div class="delivery-buttons">
                        <button type="button" class="btn btn-delivery" id="pickup-btn">Забрать в салоне</button>
                        <button type="button" class="btn btn-delivery" id="delivery-btn">Заказать доставку</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- HTML для модального окна с сообщением о результате оформления заказа -->
<div class="modal-overlay" id="success-modal">
    <div class="modal-container">
        <div class="modal-header">
            <h3 id="success-title">Заказ оформлен</h3>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <p id="success-message"></p>
            <div id="order-items-list"></div>
            <div class="order-total">
                <strong>Итого: <span id="order-total-price"></span></strong>
            </div>
            <div class="modal-autoclose">
                Окно закроется автоматически через <span id="autoclose-timer">30</span> секунд
            </div>
        </div>
    </div>
</div>

    <script>
        // Глобальная переменная для хранения корзины
let cart = [];

// Функция для отображения корзины
function toggleCart() {
    const cartDropdown = document.getElementById('cart-dropdown');
    cartDropdown.classList.toggle('active');
}

// Функция для обновления счетчика товаров в корзине
function updateCartCount() {
    const cartCount = document.getElementById('cart-count');
    const totalItems = cart.reduce((total, item) => total + item.quantity, 0);

    // Сохраняем предыдущее значение для анимации
    const previousCount = parseInt(cartCount.textContent);

    // Обновляем счетчик
    cartCount.textContent = totalItems;

    // Добавляем анимацию, если счетчик изменился
    if (previousCount !== totalItems) {
        cartCount.classList.add('updated');

        // Удаляем класс после завершения анимации
        setTimeout(() => {
            cartCount.classList.remove('updated');
        }, 500);

        // Добавляем анимацию иконке корзины
        const cartIcon = document.getElementById('cart-icon');
        cartIcon.classList.add('added');

        // Удаляем класс после завершения анимации
        setTimeout(() => {
            cartIcon.classList.remove('added');
        }, 500);
    }
}

// Функция для вычисления общей стоимости корзины
function calculateTotal() {
    return cart.reduce((total, item) => {
        // Преобразуем строку цены (например, "7 890 ₽") в число
        const price = parseFloat(item.price.replace(/\s/g, '').replace('₽', ''));
        return total + price * item.quantity;
    }, 0);
}

// Функция для обновления отображения корзины
function updateCartDisplay() {
    const cartItems = document.getElementById('cart-items');
    const cartTotalPrice = document.getElementById('cart-total-price');

    // Очищаем содержимое корзины
    cartItems.innerHTML = '';

    if (cart.length === 0) {
        cartItems.innerHTML = '<div class="empty-cart-message">Корзина пуста</div>';
        cartTotalPrice.textContent = '0 ₽';
        return;
    }

    // Добавляем каждый товар в корзину
    cart.forEach((item, index) => {
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';

        cartItem.innerHTML = `
            <img src="${item.image}" alt="${item.title}" class="cart-item-image">
            <div class="cart-item-details">
                <div class="cart-item-title">${item.title}</div>
                <div class="cart-item-price">${item.price}</div>
                <div class="cart-item-quantity">
                    <button onclick="decreaseQuantity(${index})">-</button>
                    <span>${item.quantity}</span>
                    <button onclick="increaseQuantity(${index})">+</button>
                </div>
            </div>
            <button class="remove-item" onclick="removeFromCart(${index})">✕</button>
        `;

        cartItems.appendChild(cartItem);
    });

    // Обновляем общую стоимость
    const total = calculateTotal();
    cartTotalPrice.textContent = formatPrice(total) + ' ₽';
}

// Функция для форматирования цены
function formatPrice(price) {
    return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
}

// Функция для увеличения количества товара в корзине
function increaseQuantity(index) {
    cart[index].quantity += 1;
    updateCartCount();
    updateCartDisplay();
}

// Функция для уменьшения количества товара в корзине
function decreaseQuantity(index) {
    if (cart[index].quantity > 1) {
        cart[index].quantity -= 1;
    } else {
        removeFromCart(index);
    }
    updateCartCount();
    updateCartDisplay();
}

// Функция для удаления товара из корзины
function removeFromCart(index) {
    // Сохраняем ссылку на элемент перед удалением
    const cartItem = document.querySelectorAll('.cart-item')[index];

    // Добавляем анимацию удаления
    if (cartItem) {
        cartItem.style.opacity = '0';
        cartItem.style.transform = 'translateX(100%)';

        // Удаляем элемент после завершения анимации
        setTimeout(() => {
            cart.splice(index, 1);
            updateCartCount();
            updateCartDisplay();
        }, 300);
    } else {
        // Если элемент не найден, просто удаляем из массива
        cart.splice(index, 1);
        updateCartCount();
        updateCartDisplay();
    }
}

// Функция для добавления товара в корзину
function addToCart(title, price, image, quantity = 1) {
    // Проверяем, есть ли уже такой товар в корзине
    const existingItemIndex = cart.findIndex(item => item.title === title);

    if (existingItemIndex !== -1) {
        // Если товар уже есть, увеличиваем количество
        cart[existingItemIndex].quantity += quantity;
    } else {
        // Если товара нет, добавляем новый
        cart.push({
            title,
            price,
            image,
            quantity
        });
    }

    // Обновляем отображение корзины
    updateCartCount();
    updateCartDisplay();

    // Показываем корзину при добавлении товара с анимацией
    const cartDropdown = document.getElementById('cart-dropdown');
    cartDropdown.classList.add('active');

    // Автоматически скрываем корзину через некоторое время
    setTimeout(() => {
        cartDropdown.classList.remove('active');
    }, 3000);
}

// Функция для обработки кнопки "Заказать"
function handleOrderButton(button) {
    const productCard = button.closest('.product-card');
    const orderButton = productCard.querySelector('.btn');

    // Скрываем кнопку "Заказать" с анимацией
    orderButton.style.opacity = '0';
    orderButton.style.transform = 'translateY(10px)';

    setTimeout(() => {
        orderButton.style.display = 'none';

        // Показываем виджет выбора количества
        let quantityWidget = productCard.querySelector('.quantity-widget');

        if (!quantityWidget) {
            // Если виджета еще нет, создаем его
            quantityWidget = document.createElement('div');
            quantityWidget.className = 'quantity-widget';

            quantityWidget.innerHTML = `
                <div class="quantity-controls">
                    <button class="quantity-btn minus-btn">-</button>
                    <div class="quantity-display">1</div>
                    <button class="quantity-btn plus-btn">+</button>
                </div>
                <button class="add-to-cart-btn">Добавить</button>
            `;

            // Вставляем виджет после кнопки "Заказать"
            orderButton.insertAdjacentElement('afterend', quantityWidget);

            // Добавляем обработчики событий
            const minusBtn = quantityWidget.querySelector('.minus-btn');
            const plusBtn = quantityWidget.querySelector('.plus-btn');
            const quantityDisplay = quantityWidget.querySelector('.quantity-display');
            const addToCartBtn = quantityWidget.querySelector('.add-to-cart-btn');

            minusBtn.addEventListener('click', () => {
                let quantity = parseInt(quantityDisplay.textContent);
                if (quantity > 1) {
                    quantity -= 1;
                    quantityDisplay.textContent = quantity;
                    // Добавляем небольшую анимацию
                    quantityDisplay.style.transform = 'scale(0.9)';
                    setTimeout(() => {
                        quantityDisplay.style.transform = 'scale(1)';
                    }, 100);
                }
            });

            plusBtn.addEventListener('click', () => {
                let quantity = parseInt(quantityDisplay.textContent);
                quantity += 1;
                quantityDisplay.textContent = quantity;
                // Добавляем небольшую анимацию
                quantityDisplay.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    quantityDisplay.style.transform = 'scale(1)';
                }, 100);
            });

            addToCartBtn.addEventListener('click', () => {
                const title = productCard.querySelector('.product-title').textContent;
                const price = productCard.querySelector('.product-price').textContent;
                const image = productCard.querySelector('.product-image img').src;
                const quantity = parseInt(quantityDisplay.textContent);

                // Добавляем товар в корзину
                addToCart(title, price, image, quantity);

                // Анимация для кнопки добавления
                addToCartBtn.innerHTML = 'Добавлено ✓';
                addToCartBtn.style.background = 'linear-gradient(to right, #4CAF50, #45a049)';

                // Возвращаем оригинальный текст через некоторое время
                setTimeout(() => {
                    addToCartBtn.innerHTML = 'Добавить';
                    addToCartBtn.style.background = 'linear-gradient(to right, var(--accent-orange), var(--accent-pink))';

                    // Сбрасываем виджет с анимацией
                    quantityWidget.style.opacity = '0';
                    quantityWidget.style.transform = 'translateY(10px)';

                    setTimeout(() => {
                        // Сбрасываем виджет
                        quantityDisplay.textContent = '1';
                        quantityWidget.style.display = 'none';
                        quantityWidget.style.opacity = '1';
                        quantityWidget.style.transform = 'translateY(0)';

                        // Показываем кнопку "Заказать" обратно с анимацией
                        orderButton.style.display = 'block';
                        setTimeout(() => {
                            orderButton.style.opacity = '1';
                            orderButton.style.transform = 'translateY(0)';
                        }, 50);
                    }, 300);
                }, 1500);
            });
        }

        // Показываем виджет с анимацией
        quantityWidget.style.display = 'flex';
        quantityWidget.style.opacity = '0';
        quantityWidget.style.transform = 'translateY(10px)';

        setTimeout(() => {
            quantityWidget.style.opacity = '1';
            quantityWidget.style.transform = 'translateY(0)';
        }, 50);
    }, 300);
}

// Функция для открытия модального окна оформления заказа
function openCheckoutModal() {
    if (cart.length === 0) {
        alert('Ваша корзина пуста');
        return;
    }

    const checkoutModal = document.getElementById('checkout-modal');
    checkoutModal.classList.add('active');

    // Добавляем обработчики для кнопок способа получения
    document.getElementById('pickup-btn').addEventListener('click', handlePickupOrder);
    document.getElementById('delivery-btn').addEventListener('click', handleDeliveryOrder);

    // Добавляем обработчик для закрытия модального окна
    checkoutModal.querySelector('.close-modal').addEventListener('click', () => {
        checkoutModal.classList.remove('active');
    });
}

// Функция для обработки заказа самовывозом
function handlePickupOrder() {
    const customerName = document.getElementById('customer-name').value;
    const customerPhone = document.getElementById('customer-phone').value;

    // Проверяем заполнение обязательных полей
    if (!customerName || !customerPhone) {
        alert('Пожалуйста, заполните имя и телефон');
        return;
    }

    // Закрываем модальное окно оформления заказа
    document.getElementById('checkout-modal').classList.remove('active');

    // Показываем сообщение об успешном оформлении заказа
    showSuccessModal('Заказ забронирован',
        `${customerName}, вы успешно забронировали заказ в нашем салоне. Мы свяжемся с вами по телефону ${customerPhone} для подтверждения. Ваш заказ будет готов к выдаче в ближайшее время.`);
}

// Функция для обработки заказа с доставкой
function handleDeliveryOrder() {
    const customerName = document.getElementById('customer-name').value;
    const customerPhone = document.getElementById('customer-phone').value;
    const customerAddress = document.getElementById('customer-address').value;

    // Проверяем заполнение обязательных полей
    if (!customerName || !customerPhone || !customerAddress) {
        alert('Пожалуйста, заполните все поля, включая адрес доставки');
        return;
    }

    // Закрываем модальное окно оформления заказа
    document.getElementById('checkout-modal').classList.remove('active');

    // Показываем сообщение об успешном оформлении заказа
    showSuccessModal('Заказ оформлен с доставкой',
        `${customerName}, вы успешно оформили заказ с доставкой по адресу ${customerAddress}. В ближайшее время с вами свяжется курьер по телефону ${customerPhone} для уточнения времени доставки.`);
}

// Функция для отображения модального окна с результатом оформления заказа
function showSuccessModal(title, message) {
    const successModal = document.getElementById('success-modal');
    const successTitle = document.getElementById('success-title');
    const successMessage = document.getElementById('success-message');
    const orderItemsList = document.getElementById('order-items-list');
    const orderTotalPrice = document.getElementById('order-total-price');
    const autocloseTimer = document.getElementById('autoclose-timer');

    // Устанавливаем заголовок и сообщение
    successTitle.textContent = title;
    successMessage.textContent = message;

    // Очищаем список товаров
    orderItemsList.innerHTML = '';

    // Добавляем товары из корзины в список
    cart.forEach(item => {
        const orderItem = document.createElement('div');
        orderItem.className = 'order-item';

        orderItem.innerHTML = `
            <img src="${item.image}" alt="${item.title}" class="order-item-image">
            <div class="order-item-details">
                <div class="order-item-title">${item.title}</div>
                <div class="order-item-price-qty">
                    <span>${item.price}</span>
                    <span>Количество: ${item.quantity}</span>
                </div>
            </div>
        `;

        orderItemsList.appendChild(orderItem);
    });

    // Устанавливаем общую стоимость
    const total = calculateTotal();
    orderTotalPrice.textContent = formatPrice(total) + ' ₽';

    // Показываем модальное окно
    successModal.classList.add('active');

    // Добавляем обработчик для закрытия модального окна
    successModal.querySelector('.close-modal').addEventListener('click', () => {
        successModal.classList.remove('active');

        // Очищаем корзину после успешного оформления заказа
        cart = [];
        updateCartCount();
        updateCartDisplay();
    });

    // Устанавливаем таймер автоматического закрытия
    let secondsLeft = 30;
    autocloseTimer.textContent = secondsLeft;

    const timerInterval = setInterval(() => {
        secondsLeft--;
        autocloseTimer.textContent = secondsLeft;

        if (secondsLeft <= 0) {
            clearInterval(timerInterval);
            successModal.classList.remove('active');

            // Очищаем корзину после успешного оформления заказа
            cart = [];
            updateCartCount();
            updateCartDisplay();
        }
    }, 1000);

    // Сохраняем ссылку на таймер в атрибуте модального окна,
    // чтобы его можно было очистить при ручном закрытии
    successModal.setAttribute('data-timer', timerInterval);

    // Очищаем таймер при ручном закрытии
    successModal.querySelector('.close-modal').addEventListener('click', () => {
        clearInterval(parseInt(successModal.getAttribute('data-timer')));
    });
}

// Инициализация при загрузке страницы
document.addEventListener('DOMContentLoaded', function() {
    // Инициализация корзины
    const cartIcon = document.getElementById('cart-icon');
    const closeCart = document.getElementById('close-cart');
    const checkoutBtn = document.getElementById('checkout-btn');

    // Обработчик клика по иконке корзины
    cartIcon.addEventListener('click', toggleCart);

    // Обработчик клика по кнопке закрытия корзины
    closeCart.addEventListener('click', toggleCart);

    // Закрытие корзины при клике вне её
    document.addEventListener('click', function(event) {
        const cartDropdown = document.getElementById('cart-dropdown');
        const cartIcon = document.getElementById('cart-icon');

        if (cartDropdown.classList.contains('active') &&
            !cartDropdown.contains(event.target) &&
            !cartIcon.contains(event.target)) {
            cartDropdown.classList.remove('active');
        }
    });

    // Обработчик клика по кнопке оформления заказа
    checkoutBtn.addEventListener('click', () => {
        if (cart.length === 0) {
            alert('Ваша корзина пуста');
            return;
        }

        // Открываем модальное окно оформления заказа
        openCheckoutModal();

        // Закрываем корзину
        document.getElementById('cart-dropdown').classList.remove('active');
    });

    // Заменяем стандартное поведение кнопок "Заказать"
    document.querySelectorAll('.product-card .btn').forEach(button => {
        button.removeEventListener('click', () => {});  // Удаляем предыдущий обработчик

        button.addEventListener('click', function() {
            handleOrderButton(this);
        });
    });

    // Закрытие модальных окон при клике вне их содержимого
    document.querySelectorAll('.modal-overlay').forEach(modal => {
        modal.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.classList.remove('active');

                // Если это окно результата заказа, очищаем таймер и корзину
                if (modal.id === 'success-modal') {
                    const timerId = modal.getAttribute('data-timer');
                    if (timerId) {
                        clearInterval(parseInt(timerId));
                    }

                    // Очищаем корзину после успешного оформления заказа
                    cart = [];
                    updateCartCount();
                    updateCartDisplay();
                }
            }
        });
    });

    // Плавная прокрутка для навигационных ссылок (сохраняем вашу оригинальную функциональность)
    document.querySelectorAll('nav a').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();

            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);

            if (targetElement) {
                // Получаем высоту навигационной панели для компенсации
                const navHeight = document.querySelector('nav').offsetHeight;

                // Вычисляем позицию элемента с учетом высоты навигации
                const targetPosition = targetElement.getBoundingClientRect().top + window.scrollY - navHeight;

                // Плавная прокрутка
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });

                // Визуальное выделение секции
                targetElement.style.transition = 'background-color 0.3s ease-in-out';
                const originalBg = targetElement.style.backgroundColor;

                // Мягкое подсвечивание секции при переходе
                targetElement.style.backgroundColor = 'rgba(255, 56, 100, 0.05)';
                setTimeout(() => {
                    targetElement.style.backgroundColor = originalBg;
                }, 1000);
            }
        });
    });

    // Логика фильтрации товаров по табам (сохраняем вашу оригинальную функциональность)
    document.querySelectorAll('.category-tabs').forEach((tabGroup, groupIndex) => {
        const tabs = tabGroup.querySelectorAll('.category-tab');
        const productGrid = tabGroup.nextElementSibling;
        const products = productGrid.querySelectorAll('.product-card');

        tabs.forEach((tab, tabIndex) => {
            // Добавляем атрибуты data-filter к табам
            if (groupIndex === 0) { // Табы для собак
                if (tabIndex === 0) tab.setAttribute('data-filter', 'all');
                else if (tabIndex === 1) tab.setAttribute('data-filter', 'dry');
                else if (tabIndex === 2) tab.setAttribute('data-filter', 'wet');
                else if (tabIndex === 3) tab.setAttribute('data-filter', 'medical');
            } else if (groupIndex === 1) { // Табы для кошек
                if (tabIndex === 0) tab.setAttribute('data-filter', 'all');
                else if (tabIndex === 1) tab.setAttribute('data-filter', 'dry');
                else if (tabIndex === 2) tab.setAttribute('data-filter', 'wet');
                else if (tabIndex === 3) tab.setAttribute('data-filter', 'medical');
            } else if (groupIndex === 2) { // Табы для лакомств
                if (tabIndex === 0) tab.setAttribute('data-filter', 'all');
                else if (tabIndex === 1) tab.setAttribute('data-filter', 'dog-treats');
                else if (tabIndex === 2) tab.setAttribute('data-filter', 'cat-treats');
            }

            tab.addEventListener('click', () => {
                // Удаляем активный класс у всех табов в этой группе
                tabs.forEach(t => t.classList.remove('active'));

                // Добавляем активный класс текущему табу
                tab.classList.add('active');

                // Логика фильтрации товаров
                const filter = tab.getAttribute('data-filter');

                products.forEach(product => {
                    if (filter === 'all') {
                        product.style.display = 'block';
                    } else {
                        const subCategory = product.getAttribute('data-sub-category');

                        if (subCategory === filter) {
                            product.style.display = 'block';

                            // Анимация появления
                            product.style.opacity = '0';
                            setTimeout(() => {
                                product.style.transition = 'opacity 0.3s ease-in-out';
                                product.style.opacity = '1';
                            }, 50);
                        } else {
                            product.style.display = 'none';
                        }
                    }
                });

                // Проверяем, есть ли видимые товары
                const visibleProducts = Array.from(products).filter(p => p.style.display !== 'none');

                if (visibleProducts.length === 0) {
                    // Если нет видимых товаров, показываем сообщение
                    let emptyMessage = productGrid.querySelector('.empty-message');

                    if (!emptyMessage) {
                        emptyMessage = document.createElement('p');
                        emptyMessage.className = 'empty-message';
                        emptyMessage.style.textAlign = 'center';
                        emptyMessage.style.gridColumn = '1 / -1';
                        emptyMessage.style.padding = '2rem';
                        emptyMessage.style.color = '#666';
                        productGrid.appendChild(emptyMessage);
                    }

                    emptyMessage.textContent = 'В данной категории товары отсутствуют';
                    emptyMessage.style.display = 'block';
                } else {
                    // Если есть видимые товары, скрываем сообщение
                    const emptyMessage = productGrid.querySelector('.empty-message');
                    if (emptyMessage) {
                        emptyMessage.style.display = 'none';
                    }
                }
            });
        });
    });
});
    </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
</body>
</html>