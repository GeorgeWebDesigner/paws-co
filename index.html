<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paws&Co - Каталог кормов</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="test-styles.css">
</head>
<body>
    <header class="desktop-header">
    <div class="header-background">
    </div>

    <div class="header-content">
        <div class="logo-container">
            <div class="rainbow-border">
                <img src="Paws-black.png" alt="Paws&Co Logo" class="logo">
            </div>
        </div>
        <div class="hero-text">
            <h1>Paws&Co Белград</h1>
            <p>Грумминг салон</p>
            <div class="social-links">
                <a href="#" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
                <a href="https://www.instagram.com/pawsco_rs/" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
            </div>
            <a href="main.html" class="btn btn-accent open-booking-modal">На главную</a>
        </div>
    </div>
</header>

    <!-- Контейнер с выбором животного и каталогом -->
<div class="container app-container">
    <!-- Выбор животного -->
    <div class="pet-selection" id="pet-selection">
        <h2>Выберите вашего питомца</h2>
        <p>В нашем каталоге представлены товары как для собак, так и для кошек. Выберите вашего питомца, чтобы увидеть подходящие товары. Мы предлагаем только качественную продукцию от проверенных производителей.</p>

        <div class="pet-buttons">
            <div>
                <button class="pet-button" id="dog-button">
                    <img src="https://cdn3.iconfinder.com/data/icons/animal-40/128/Animal_Dog-512.png" alt="Собака">
                </button>
                <span class="pet-button-label">Собака</span>
            </div>

            <div>
                <button class="pet-button" id="cat-button">
                    <img src="https://cdn3.iconfinder.com/data/icons/animal-40/128/Animal_Cat-512.png" alt="Кошка">
                </button>
                <span class="pet-button-label">Кошка</span>
            </div>
        </div>
    </div>

    <!-- Контейнер для товаров для собак -->
    <div class="pet-container" id="dog-container">
        <button class="back-button" id="back-from-dog">Вернуться к выбору питомца</button>

        <!-- Секция Корм для собак -->
        <h2 class="section-title" id="dog-food">Корм для собак</h2>

        <div class="category-tabs">
            <div class="category-tab active">Все</div>
            <div class="category-tab">Monge</div>
            <div class="category-tab">Taste of the Wild</div>
            <div class="category-tab">Bwild</div>
        </div>

        <div class="product-grid">
            <!-- Товары для собак -->
            <div class="product-card" data-sub-category="monge">
                <div class="product-image">
                    <img src="https://petspot.rs/media/catalog/product/cache/ed4adb986bd66100ea82ae25c628006d/0/1/013619.jpg" alt="Monge ALL BREED PUPPY">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge ALL BREED PUPPY</h3>
                    <p class="product-description">Сухой корм для щенков с ягненком и рисом, 2.5 кг</p>
                    <p class="product-price">1390 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="monge">
                <div class="product-image">
                    <img src="https://granulica.com/main/wp-content/uploads/2023/07/Monge-All-Breeds-Adult-Jagnjetina-2.5kg.jpg" alt="Monge ALL BREED ADULT">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge All Breed Adult</h3>
                    <p class="product-description">Сухой корм для взрослых собак с говядиной, 2.5 кг</p>
                    <p class="product-price">2390 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="taste-of-the-wild">
                <div class="product-image">
                    <img src="https://ceba.com.co/cdn/shop/files/151.jpg?v=1686768047" alt="Taste of the Wild High Prairie">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Taste of the Wild High Prairie</h3>
                    <p class="product-description">Сухой корм с олениной и бизоном, 2 кг</p>
                    <p class="product-price">1790 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="bwild">
                <div class="product-image">
                    <img src="https://monge.shop/608-home_default/bwild-grain-free-lamb-with-peas-and-potato-12kg.jpg" alt="Monge BWild Lamb">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge BWild Lamb</h3>
                    <p class="product-description">Беззерновой корм для собак с ягненком, 400 г</p>
                    <p class="product-price">590 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>
        </div>

        <!-- Секция Лакомства для собак -->
        <h2 class="section-title" id="dog-treats">Лакомства для собак</h2>

        <div class="category-tabs">
            <div class="category-tab active">Все</div>
            <div class="category-tab">Monge</div>
            <div class="category-tab">Другие бренды</div>
        </div>

        <div class="product-grid">
            <div class="product-card" data-sub-category="monge">
                <div class="product-image">
                    <img src="https://www.vetanima.rs/images/product/original/19949.png" alt="Monge Sensitive digestion">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge Sensitive Digestion</h3>
                    <p class="product-description">Лакомство для чувствительного пищеварения с ягненком и каштаном, 45 г</p>
                    <p class="product-price">260 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="monge">
                <div class="product-image">
                    <img src="https://www.monge.it/wp-content/uploads/2023/05/3_monge-gift_sticks_immunity-support-dog-ricco-in-coniglio-fresco-con-nucleotidi-e-betaglucani-319x500-1.jpg" alt="Monge Immunity support">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge Immunity Support</h3>
                    <p class="product-description">Лакомство для поддержки иммунитета с кроликом, 45 г</p>
                    <p class="product-price">260 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>
        </div>

        <!-- Секция Игрушки для собак -->
        <h2 class="section-title" id="dog-toys">Игрушки для собак</h2>

        <div class="category-tabs">
            <div class="category-tab active">Все</div>
            <div class="category-tab">Мячики</div>
            <div class="category-tab">Латексные</div>
        </div>

        <div class="product-grid">
            <div class="product-card" data-sub-category="latex">
                <div class="product-image">
                    <img src="https://cdn-img.pethouse.rs/products/dv400031.jpg" alt="DV Igracka latex">
                </div>
                <div class="product-info">
                    <h3 class="product-title">DV Igracka Latex</h3>
                    <p class="product-description">Латексная игрушка для собак, 8.5 см, ассортимент</p>
                    <p class="product-price">390 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="latex">
                <div class="product-image">
                    <img src="https://cdn-img.pethouse.rs/products/fl523923.jpg" alt="FL RUGGO LATEX RUGBY">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Flamingo Ruggo Latex Rugby</h3>
                    <p class="product-description">Латексная игрушка в форме мяча для регби, 7.7×4.9 см</p>
                    <p class="product-price">350 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="balls">
                <div class="product-image">
                    <img src="https://cdn-img.pethouse.rs/products/fl524070.jpg" alt="FL Toy bounca ball">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Flamingo Bounca Ball</h3>
                    <p class="product-description">Прыгающий мячик для животных, 6.3 см</p>
                    <p class="product-price">190 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Контейнер для товаров для кошек -->
    <div class="pet-container" id="cat-container">
        <button class="back-button" id="back-from-cat">Вернуться к выбору питомца</button>

        <!-- Секция Корм для кошек -->
        <h2 class="section-title" id="cat-food">Корм для кошек</h2>

        <div class="category-tabs">
            <div class="category-tab active">Все</div>
            <div class="category-tab">Сухой корм</div>
            <div class="category-tab">Влажный корм</div>
            <div class="category-tab">Лечебный корм</div>
        </div>

        <div class="product-grid">
            <!-- Товары для кошек -->
            <div class="product-card" data-sub-category="dry">
                <div class="product-image">
                    <img src="https://www.apetit.rs/proizvodi/7800/monge-adult-monoprotein-salmon.jpg" alt="Monge Cat Adult Salmon">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge Cat Adult Salmon</h3>
                    <p class="product-description">Сухой корм для взрослых кошек с лососем, 1.5 кг</p>
                    <p class="product-price">950 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="dry">
                <div class="product-image">
                    <img src="https://www.petrepublic.rs/image/full/8009470005234.jpg" alt="Monge CAT HAIRBALL">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge CAT HAIRBALL</h3>
                    <p class="product-description">Сухой корм для выведения шерсти, 1.5 кг</p>
                    <p class="product-price">910 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="wet">
                <div class="product-image">
                    <img src="https://www.vetanima.rs/images/product/original/20422.png" alt="Monge Grill Steril">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge Grill Cat Steril</h3>
                    <p class="product-description">Влажный корм для стерилизованных кошек с говядиной, 85 г</p>
                    <p class="product-price">90 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="medical">
                <div class="product-image">
                    <img src="https://www.oliva.rs/image/cache/catalog/proizvodi/046-007-03268/monge-cat-urinary-1-5kg-1000x1000.jpg" alt="Monge CAT URINARY">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge CAT URINARY</h3>
                    <p class="product-description">Профилактический корм для кошек с заболеваниями мочевыводящих путей, 1.5 кг</p>
                    <p class="product-price">1010 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>
        </div>

        <!-- Секция Лакомства для кошек -->
        <h2 class="section-title" id="cat-treats">Лакомства для кошек</h2>

        <div class="category-tabs">
            <div class="category-tab active">Все</div>
            <div class="category-tab">Monge</div>
            <div class="category-tab">Другие бренды</div>
        </div>

        <div class="product-grid">
            <div class="product-card" data-sub-category="monge">
                <div class="product-image">
                    <img src="https://cdn-img.pethouse.rs/products/monge-sterilised-duck-pomegranate-50-gr.jpg" alt="Monge Sterilised Duck">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge Sterilised Duck</h3>
                    <p class="product-description">Лакомство для стерилизованных кошек с уткой и гранатом, 50 г</p>
                    <p class="product-price">270 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>

            <div class="product-card" data-sub-category="monge">
                <div class="product-image">
                    <img src="https://cdn-img.pethouse.rs/products/monge-sterilized-duck-with-lemon-balm-15-g.jpg" alt="Monge Sterilised Duck">
                </div>
                <div class="product-info">
                    <h3 class="product-title">Monge Sterilised Duck</h3>
                    <p class="product-description">Лакомство для стерилизованных кошек с уткой и мелиссой, 15 г</p>
                    <p class="product-price">120 ₽</p>
                    <button class="btn">Заказать</button>
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="cart-container">
    <div class="cart-icon" id="cart-icon">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cart-count">0</span>
    </div>
    <div class="cart-dropdown" id="cart-dropdown">
        <div class="cart-header">
            <h3>Корзина</h3>
            <button class="close-cart" id="close-cart">&times;</button>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Здесь будут отображаться товары в корзине -->
            <div class="empty-cart-message">Корзина пуста</div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Итого:</span>
                <span id="cart-total-price">0 ₽</span>
            </div>
            <button class="btn btn-accent" id="checkout-btn">Оформить заказ</button>
        </div>
    </div>
</div>

    <footer id="contact">
        <h3>Paws&Co - Грумминг салон и зоомагазин</h3>
        <div class="contact-info">
            <p>Адрес: Brane Crnčevića 9, Beograd</p>
            <p class="contact-item">Телефон: <a href="tel:+381691032439"> +381 69 1032 439</a></p>
            <p class="contact-item">Email: <a href="mailto:pawsco@gmail.com"> pawsco@gmail.com</a></p>
            <p>Часы работы: 11:00 - 19:00, без выходных</p>
        </div>
        <a href="main.html" class="btn btn-accent">На главную страницу</a>
        <p style="margin-top: 2rem;">© 2025 Paws&Co. Все права защищены.</p>
    </footer>

    <!-- HTML для модального окна оформления заказа -->
<div class="modal-overlay" id="checkout-modal">
    <div class="modal-container">
        <div class="modal-header">
            <h3>Оформление заказа</h3>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <form id="checkout-form">
                <div class="form-group">
                    <label for="customer-name">Имя</label>
                    <input type="text" id="customer-name" required placeholder="Введите ваше имя">
                </div>
                <div class="form-group">
                    <label for="customer-phone">Телефон</label>
                    <input type="tel" id="customer-phone" required placeholder="Введите ваш телефон">
                </div>
                <div class="form-group">
                    <label for="customer-address">Адрес</label>
                    <textarea id="customer-address" rows="3" placeholder="Введите ваш адрес (если выберете доставку)"></textarea>
                </div>
                <div class="delivery-options">
                    <h4>Способ получения</h4>
                    <div class="delivery-buttons">
                        <button type="button" class="btn btn-delivery" id="pickup-btn">Забрать в салоне</button>
                        <button type="button" class="btn btn-delivery" id="delivery-btn">Заказать доставку</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- HTML для модального окна с сообщением о результате оформления заказа -->
<div class="modal-overlay" id="success-modal">
    <div class="modal-container">
        <div class="modal-header">
            <h3 id="success-title">Заказ оформлен</h3>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <p id="success-message"></p>
            <div id="order-items-list"></div>
            <div class="order-total">
                <strong>Итого: <span id="order-total-price"></span></strong>
            </div>
            <div class="modal-autoclose">
                Окно закроется автоматически через <span id="autoclose-timer">30</span> секунд
            </div>
        </div>
    </div>
</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Получаем элементы
    const petSelection = document.getElementById('pet-selection');
    const dogButton = document.getElementById('dog-button');
    const catButton = document.getElementById('cat-button');
    const dogContainer = document.getElementById('dog-container');
    const catContainer = document.getElementById('cat-container');
    const backFromDog = document.getElementById('back-from-dog');
    const backFromCat = document.getElementById('back-from-cat');

    console.log("Elements loaded:", {petSelection, dogButton, catButton, dogContainer, catContainer});

    // Обработчик для кнопки собак
    if (dogButton) {
        dogButton.addEventListener('click', function() {
            console.log("Dog button clicked");
            // Добавляем класс анимации
            this.classList.add('clicked');

            // После задержки показываем товары для собак
            setTimeout(() => {
                petSelection.style.display = 'none';
                dogContainer.classList.add('active');
                // Плавный скролл к началу контейнера
                window.scrollTo({
                    top: dogContainer.offsetTop - 100,
                    behavior: 'smooth'
                });
            }, 500);

            // Удаляем класс анимации через некоторое время
            setTimeout(() => {
                this.classList.remove('clicked');
            }, 600);
        });
    }

    // Обработчик для кнопки кошек
    if (catButton) {
        catButton.addEventListener('click', function() {
            console.log("Cat button clicked");
            // Добавляем класс анимации
            this.classList.add('clicked');

            // После задержки показываем товары для кошек
            setTimeout(() => {
                petSelection.style.display = 'none';
                catContainer.classList.add('active');
                // Плавный скролл к началу контейнера
                window.scrollTo({
                    top: catContainer.offsetTop - 100,
                    behavior: 'smooth'
                });
            }, 500);

            // Удаляем класс анимации через некоторое время
            setTimeout(() => {
                this.classList.remove('clicked');
            }, 600);
        });
    }

    // Обработчик для кнопки возврата от товаров для собак
    if (backFromDog) {
        backFromDog.addEventListener('click', function() {
            dogContainer.classList.remove('active');
            petSelection.style.display = 'flex';
            // Плавный скролл к выбору животного
            window.scrollTo({
                top: petSelection.offsetTop - 100,
                behavior: 'smooth'
            });
        });
    }

    // Обработчик для кнопки возврата от товаров для кошек
    if (backFromCat) {
        backFromCat.addEventListener('click', function() {
            catContainer.classList.remove('active');
            petSelection.style.display = 'flex';
            // Плавный скролл к выбору животного
            window.scrollTo({
                top: petSelection.offsetTop - 100,
                behavior: 'smooth'
            });
        });
    }

    // Логика для кнопок фильтрации товаров
    document.querySelectorAll('.category-tabs').forEach((tabGroup) => {
        const tabs = tabGroup.querySelectorAll('.category-tab');
        const productGrid = tabGroup.nextElementSibling;
        const products = productGrid.querySelectorAll('.product-card');

        tabs.forEach((tab, tabIndex) => {
            tab.addEventListener('click', () => {
                // Удаляем активный класс у всех табов в этой группе
                tabs.forEach(t => t.classList.remove('active'));

                // Добавляем активный класс текущему табу
                tab.classList.add('active');

                // Логика фильтрации товаров
                const filter = tab.getAttribute('data-filter') || (tabIndex === 0 ? 'all' : tab.textContent.toLowerCase());

                products.forEach(product => {
                    if (filter === 'all') {
                        product.style.display = 'block';
                    } else {
                        const subCategory = product.getAttribute('data-sub-category');

                        if (subCategory === filter) {
                            product.style.display = 'block';

                            // Анимация появления
                            product.style.opacity = '0';
                            setTimeout(() => {
                                product.style.transition = 'opacity 0.3s ease-in-out';
                                product.style.opacity = '1';
                            }, 50);
                        } else {
                            product.style.display = 'none';
                        }
                    }
                });
            });
        });
    });

    // Для мобильных устройств
    if (window.innerWidth <= 768) {
        // Обработка переключения между категориями
        document.querySelectorAll('.category-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const categoryTitle = this.textContent;

                if (document.getElementById('current-category')) {
                    document.getElementById('current-category').textContent =
                        this.classList.contains('active') && this.textContent === 'Все'
                            ? document.querySelector('.section-title').textContent
                            : categoryTitle;
                }

                // Активация таба
                const tabs = this.parentElement.querySelectorAll('.category-tab');
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Обработка экрана выбора животного
        if (dogButton) {
            dogButton.addEventListener('click', function() {
                setTimeout(() => {
                    if (document.getElementById('current-category')) {
                        document.getElementById('current-category').textContent = 'Корм для собак';
                    }
                }, 500);
            });
        }

        if (catButton) {
            catButton.addEventListener('click', function() {
                setTimeout(() => {
                    if (document.getElementById('current-category')) {
                        document.getElementById('current-category').textContent = 'Корм для кошек';
                    }
                }, 500);
            });
        }
    }

    // Глобальная переменная для хранения корзины
    let cart = [];

    // Функция для отображения корзины
    function toggleCart() {
        const cartDropdown = document.getElementById('cart-dropdown');
        cartDropdown.classList.toggle('active');
    }

    // Функция для обновления счетчика товаров в корзине
    function updateCartCount() {
        const cartCount = document.getElementById('cart-count');
        const totalItems = cart.reduce((total, item) => total + item.quantity, 0);

        // Сохраняем предыдущее значение для анимации
        const previousCount = parseInt(cartCount.textContent);

        // Обновляем счетчик
        cartCount.textContent = totalItems;

        // Добавляем анимацию, если счетчик изменился
        if (previousCount !== totalItems) {
            cartCount.classList.add('updated');

            // Удаляем класс после завершения анимации
            setTimeout(() => {
                cartCount.classList.remove('updated');
            }, 500);

            // Добавляем анимацию иконке корзины
            const cartIcon = document.getElementById('cart-icon');
            cartIcon.classList.add('added');

            // Удаляем класс после завершения анимации
            setTimeout(() => {
                cartIcon.classList.remove('added');
            }, 500);
        }
    }

    // Функция для вычисления общей стоимости корзины
    function calculateTotal() {
        return cart.reduce((total, item) => {
            // Преобразуем строку цены (например, "7 890 ₽") в число
            const price = parseFloat(item.price.replace(/\s/g, '').replace('₽', ''));
            return total + price * item.quantity;
        }, 0);
    }

    // Функция для обновления отображения корзины
    function updateCartDisplay() {
        const cartItems = document.getElementById('cart-items');
        const cartTotalPrice = document.getElementById('cart-total-price');

        // Очищаем содержимое корзины
        cartItems.innerHTML = '';

        if (cart.length === 0) {
            cartItems.innerHTML = '<div class="empty-cart-message">Корзина пуста</div>';
            cartTotalPrice.textContent = '0 ₽';
            return;
        }

        // Добавляем каждый товар в корзину
        cart.forEach((item, index) => {
            const cartItem = document.createElement('div');
            cartItem.className = 'cart-item';

            cartItem.innerHTML = `
                <img src="${item.image}" alt="${item.title}" class="cart-item-image">
                <div class="cart-item-details">
                    <div class="cart-item-title">${item.title}</div>
                    <div class="cart-item-price">${item.price}</div>
                    <div class="cart-item-quantity">
                        <button onclick="decreaseQuantity(${index})">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="increaseQuantity(${index})">+</button>
                    </div>
                </div>
                <button class="remove-item" onclick="removeFromCart(${index})">✕</button>
            `;

            cartItems.appendChild(cartItem);
        });

        // Обновляем общую стоимость
        const total = calculateTotal();
        cartTotalPrice.textContent = formatPrice(total) + ' ₽';
    }

    // Функция для форматирования цены
    function formatPrice(price) {
        return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
    }

    // Объявляем функции в глобальной области видимости
    window.increaseQuantity = function(index) {
        cart[index].quantity += 1;
        updateCartCount();
        updateCartDisplay();
    };

    window.decreaseQuantity = function(index) {
        if (cart[index].quantity > 1) {
            cart[index].quantity -= 1;
        } else {
            removeFromCart(index);
        }
        updateCartCount();
        updateCartDisplay();
    };

    window.removeFromCart = function(index) {
        // Сохраняем ссылку на элемент перед удалением
        const cartItem = document.querySelectorAll('.cart-item')[index];

        // Добавляем анимацию удаления
        if (cartItem) {
            cartItem.style.opacity = '0';
            cartItem.style.transform = 'translateX(100%)';

            // Удаляем элемент после завершения анимации
            setTimeout(() => {
                cart.splice(index, 1);
                updateCartCount();
                updateCartDisplay();
            }, 300);
        } else {
            // Если элемент не найден, просто удаляем из массива
            cart.splice(index, 1);
            updateCartCount();
            updateCartDisplay();
        }
    };

    // Функция для добавления товара в корзину
    function addToCart(title, price, image, quantity = 1) {
        // Проверяем, есть ли уже такой товар в корзине
        const existingItemIndex = cart.findIndex(item => item.title === title);

        if (existingItemIndex !== -1) {
            // Если товар уже есть, увеличиваем количество
            cart[existingItemIndex].quantity += quantity;
        } else {
            // Если товара нет, добавляем новый
            cart.push({
                title,
                price,
                image,
                quantity
            });
        }

        // Обновляем отображение корзины
        updateCartCount();
        updateCartDisplay();

        // Показываем корзину при добавлении товара с анимацией
        const cartDropdown = document.getElementById('cart-dropdown');
        cartDropdown.classList.add('active');

        // Автоматически скрываем корзину через некоторое время
        setTimeout(() => {
            cartDropdown.classList.remove('active');
        }, 3000);
    }

    // Функция для обработки кнопки "Заказать"
    function handleOrderButton(button) {
        const productCard = button.closest('.product-card');
        const orderButton = productCard.querySelector('.btn');

        // Скрываем кнопку "Заказать" с анимацией
        orderButton.style.opacity = '0';
        orderButton.style.transform = 'translateY(10px)';

        setTimeout(() => {
            orderButton.style.display = 'none';

            // Показываем виджет выбора количества
            let quantityWidget = productCard.querySelector('.quantity-widget');

            if (!quantityWidget) {
                // Если виджета еще нет, создаем его
                quantityWidget = document.createElement('div');
                quantityWidget.className = 'quantity-widget';

                quantityWidget.innerHTML = `
                    <div class="quantity-controls">
                        <button class="quantity-btn minus-btn">-</button>
                        <div class="quantity-display">1</div>
                        <button class="quantity-btn plus-btn">+</button>
                    </div>
                    <button class="add-to-cart-btn">Добавить</button>
                `;

                // Вставляем виджет после кнопки "Заказать"
                orderButton.insertAdjacentElement('afterend', quantityWidget);

                // Добавляем обработчики событий
                const minusBtn = quantityWidget.querySelector('.minus-btn');
                const plusBtn = quantityWidget.querySelector('.plus-btn');
                const quantityDisplay = quantityWidget.querySelector('.quantity-display');
                const addToCartBtn = quantityWidget.querySelector('.add-to-cart-btn');

                minusBtn.addEventListener('click', () => {
                    let quantity = parseInt(quantityDisplay.textContent);
                    if (quantity > 1) {
                        quantity -= 1;
                        quantityDisplay.textContent = quantity;
                        // Добавляем небольшую анимацию
                        quantityDisplay.style.transform = 'scale(0.9)';
                        setTimeout(() => {
                            quantityDisplay.style.transform = 'scale(1)';
                        }, 100);
                    }
                });

                plusBtn.addEventListener('click', () => {
                    let quantity = parseInt(quantityDisplay.textContent);
                    quantity += 1;
                    quantityDisplay.textContent = quantity;
                    // Добавляем небольшую анимацию
                    quantityDisplay.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        quantityDisplay.style.transform = 'scale(1)';
                    }, 100);
                });

                addToCartBtn.addEventListener('click', () => {
                    const title = productCard.querySelector('.product-title').textContent;
                    const price = productCard.querySelector('.product-price').textContent;
                    const image = productCard.querySelector('.product-image img').src;
                    const quantity = parseInt(quantityDisplay.textContent);

                    // Добавляем товар в корзину
                    addToCart(title, price, image, quantity);

                    // Анимация для кнопки добавления
                    addToCartBtn.innerHTML = 'Добавлено ✓';
                    addToCartBtn.style.background = 'linear-gradient(to right, #4CAF50, #45a049)';

                    // Возвращаем оригинальный текст через некоторое время
                    setTimeout(() => {
                        addToCartBtn.innerHTML = 'Добавить';
                        addToCartBtn.style.background = 'linear-gradient(to right, var(--accent-orange), var(--accent-pink))';

                        // Сбрасываем виджет с анимацией
                        quantityWidget.style.opacity = '0';
                        quantityWidget.style.transform = 'translateY(10px)';

                        setTimeout(() => {
                            // Сбрасываем виджет
                            quantityDisplay.textContent = '1';
                            quantityWidget.style.display = 'none';
                            quantityWidget.style.opacity = '1';
                            quantityWidget.style.transform = 'translateY(0)';

                            // Показываем кнопку "Заказать" обратно с анимацией
                            orderButton.style.display = 'block';
                            setTimeout(() => {
                                orderButton.style.opacity = '1';
                                orderButton.style.transform = 'translateY(0)';
                            }, 50);
                        }, 300);
                    }, 1500);
                });
            }

            // Показываем виджет с анимацией
            quantityWidget.style.display = 'flex';
            quantityWidget.style.opacity = '0';
            quantityWidget.style.transform = 'translateY(10px)';

            setTimeout(() => {
                quantityWidget.style.opacity = '1';
                quantityWidget.style.transform = 'translateY(0)';
            }, 50);
        }, 300);
    }

    // Функция для открытия модального окна оформления заказа
    function openCheckoutModal() {
        if (cart.length === 0) {
            alert('Ваша корзина пуста');
            return;
        }

        const checkoutModal = document.getElementById('checkout-modal');
        checkoutModal.classList.add('active');

        // Добавляем обработчики для кнопок способа получения
        document.getElementById('pickup-btn').addEventListener('click', handlePickupOrder);
        document.getElementById('delivery-btn').addEventListener('click', handleDeliveryOrder);

        // Добавляем обработчик для закрытия модального окна
        checkoutModal.querySelector('.close-modal').addEventListener('click', () => {
            checkoutModal.classList.remove('active');
        });
    }

    // Функция для обработки заказа самовывозом
    function handlePickupOrder() {
        const customerName = document.getElementById('customer-name').value;
        const customerPhone = document.getElementById('customer-phone').value;

        // Проверяем заполнение обязательных полей
        if (!customerName || !customerPhone) {
            alert('Пожалуйста, заполните имя и телефон');
            return;
        }

        // Закрываем модальное окно оформления заказа
        document.getElementById('checkout-modal').classList.remove('active');

        // Показываем сообщение об успешном оформлении заказа
        showSuccessModal('Заказ забронирован',
            `${customerName}, вы успешно забронировали заказ в нашем салоне. Мы свяжемся с вами по телефону ${customerPhone} для подтверждения. Ваш заказ будет готов к выдаче в ближайшее время.`);
    }

    // Функция для обработки заказа с доставкой
    function handleDeliveryOrder() {
        const customerName = document.getElementById('customer-name').value;
        const customerPhone = document.getElementById('customer-phone').value;
        const customerAddress = document.getElementById('customer-address').value;

        // Проверяем заполнение обязательных полей
        if (!customerName || !customerPhone || !customerAddress) {
            alert('Пожалуйста, заполните все поля, включая адрес доставки');
            return;
        }

        // Закрываем модальное окно оформления заказа
        document.getElementById('checkout-modal').classList.remove('active');

        // Показываем сообщение об успешном оформлении заказа
        showSuccessModal('Заказ оформлен с доставкой',
            `${customerName}, вы успешно оформили заказ с доставкой по адресу ${customerAddress}. В ближайшее время с вами свяжется курьер по телефону ${customerPhone} для уточнения времени доставки.`);
    }

    // Функция для отображения модального окна с результатом оформления заказа
    function showSuccessModal(title, message) {
        const successModal = document.getElementById('success-modal');
        const successTitle = document.getElementById('success-title');
        const successMessage = document.getElementById('success-message');
        const orderItemsList = document.getElementById('order-items-list');
        const orderTotalPrice = document.getElementById('order-total-price');
        const autocloseTimer = document.getElementById('autoclose-timer');

        // Устанавливаем заголовок и сообщение
        successTitle.textContent = title;
        successMessage.textContent = message;

        // Очищаем список товаров
        orderItemsList.innerHTML = '';

        // Добавляем товары из корзины в список
        cart.forEach(item => {
            const orderItem = document.createElement('div');
            orderItem.className = 'order-item';

            orderItem.innerHTML = `
                <img src="${item.image}" alt="${item.title}" class="order-item-image">
                <div class="order-item-details">
                    <div class="order-item-title">${item.title}</div>
                    <div class="order-item-price-qty">
                        <span>${item.price}</span>
                        <span>Количество: ${item.quantity}</span>
                    </div>
                </div>
            `;

            orderItemsList.appendChild(orderItem);
        });

        // Устанавливаем общую стоимость
        const total = calculateTotal();
        orderTotalPrice.textContent = formatPrice(total) + ' ₽';

        // Показываем модальное окно
        successModal.classList.add('active');

        // Добавляем обработчик для закрытия модального окна
        successModal.querySelector('.close-modal').addEventListener('click', () => {
            successModal.classList.remove('active');

            // Очищаем корзину после успешного оформления заказа
            cart = [];
            updateCartCount();
            updateCartDisplay();
        });

        // Устанавливаем таймер автоматического закрытия
        let secondsLeft = 30;
        autocloseTimer.textContent = secondsLeft;

        const timerInterval = setInterval(() => {
            secondsLeft--;
            autocloseTimer.textContent = secondsLeft;

            if (secondsLeft <= 0) {
                clearInterval(timerInterval);
                successModal.classList.remove('active');

                // Очищаем корзину после успешного оформления заказа
                cart = [];
                updateCartCount();
                updateCartDisplay();
            }
        }, 1000);

        // Сохраняем ссылку на таймер в атрибуте модального окна,
        // чтобы его можно было очистить при ручном закрытии
        successModal.setAttribute('data-timer', timerInterval);

        // Очищаем таймер при ручном закрытии
        successModal.querySelector('.close-modal').addEventListener('click', () => {
            clearInterval(parseInt(successModal.getAttribute('data-timer')));
        });
    }

    // Инициализация корзины
    const cartIcon = document.getElementById('cart-icon');
    const closeCart = document.getElementById('close-cart');
    const checkoutBtn = document.getElementById('checkout-btn');

    // Обработчик клика по иконке корзины
    if (cartIcon) {
        cartIcon.addEventListener('click', toggleCart);
    }

    // Обработчик клика по кнопке закрытия корзины
    if (closeCart) {
        closeCart.addEventListener('click', toggleCart);
    }

    // Закрытие корзины при клике вне её
    document.addEventListener('click', function(event) {
        const cartDropdown = document.getElementById('cart-dropdown');
        const cartIcon = document.getElementById('cart-icon');

        if (cartDropdown && cartDropdown.classList.contains('active') &&
            !cartDropdown.contains(event.target) &&
            cartIcon && !cartIcon.contains(event.target)) {
            cartDropdown.classList.remove('active');
        }
    });

    // Обработчик клика по кнопке оформления заказа
    if (checkoutBtn) {
        checkoutBtn.addEventListener('click', () => {
            if (cart.length === 0) {
                alert('Ваша корзина пуста');
                return;
            }

            // Открываем модальное окно оформления заказа
            openCheckoutModal();

            // Закрываем корзину
            document.getElementById('cart-dropdown').classList.remove('active');
        });
    }

    // Заменяем стандартное поведение кнопок "Заказать"
    document.querySelectorAll('.product-card .btn').forEach(button => {
        button.addEventListener('click', function() {
            handleOrderButton(this);
        });
    });

    // Закрытие модальных окон при клике вне их содержимого
    document.querySelectorAll('.modal-overlay').forEach(modal => {
        modal.addEventListener('click', (event) => {
            if (event.target === modal) {
                modal.classList.remove('active');

                // Если это окно результата заказа, очищаем таймер и корзину
                if (modal.id === 'success-modal') {
                    const timerId = modal.getAttribute('data-timer');
                    if (timerId) {
                        clearInterval(parseInt(timerId));
                    }

                    // Очищаем корзину после успешного оформления заказа
                    cart = [];
                    updateCartCount();
                    updateCartDisplay();
                }
            }
        });
    });

    // Плавная прокрутка для навигационных ссылок
    document.querySelectorAll('nav a').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();

            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);

            if (targetElement) {
                // Получаем высоту навигационной панели для компенсации
                const navHeight = document.querySelector('nav').offsetHeight;

                // Вычисляем позицию элемента с учетом высоты навигации
                const targetPosition = targetElement.getBoundingClientRect().top + window.scrollY - navHeight;

                // Плавная прокрутка
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });

                // Визуальное выделение секции
                targetElement.style.transition = 'background-color 0.3s ease-in-out';
                const originalBg = targetElement.style.backgroundColor;

                // Мягкое подсвечивание секции при переходе
                targetElement.style.backgroundColor = 'rgba(255, 56, 100, 0.05)';
                setTimeout(() => {
                    targetElement.style.backgroundColor = originalBg;
                }, 1000);
            }
        });
    });

    // Логика фильтрации товаров по табам
    document.querySelectorAll('.category-tabs').forEach((tabGroup, groupIndex) => {
        const tabs = tabGroup.querySelectorAll('.category-tab');
        const productGrid = tabGroup.nextElementSibling;
        const products = productGrid.querySelectorAll('.product-card');

        tabs.forEach((tab, tabIndex) => {
            // Добавляем атрибуты data-filter к табам
            if (groupIndex === 0) { // Табы для собак
                if (tabIndex === 0) tab.setAttribute('data-filter', 'all');
                else if (tabIndex === 1) tab.setAttribute('data-filter', 'monge');
                else if (tabIndex === 2) tab.setAttribute('data-filter', 'taste-of-the-wild');
                else if (tabIndex === 3) tab.setAttribute('data-filter', 'bwild');
            } else if (groupIndex === 1) { // Табы для кошек
                if (tabIndex === 0) tab.setAttribute('data-filter', 'all');
                else if (tabIndex === 1) tab.setAttribute('data-filter', 'dry');
                else if (tabIndex === 2) tab.setAttribute('data-filter', 'wet');
                else if (tabIndex === 3) tab.setAttribute('data-filter', 'medical');
            } else if (groupIndex === 2) { // Табы для лакомств
                if (tabIndex === 0) tab.setAttribute('data-filter', 'all');
                else if (tabIndex === 1) tab.setAttribute('data-filter', 'dog-treats');
                else if (tabIndex === 2) tab.setAttribute('data-filter', 'cat-treats');
            } else if (groupIndex === 3) { // Табы для лакомств
                if (tabIndex === 0) tab.setAttribute('data-filter', 'all');
                else if (tabIndex === 1) tab.setAttribute('data-filter', 'dog-toys');
                else if (tabIndex === 2) tab.setAttribute('data-filter', 'balls');
                else if (tabIndex === 3) tab.setAttribute('data-filter', 'accessories');
            } else if (groupIndex === 4) { // Табы для ухода
                if (tabIndex === 0) tab.setAttribute('data-filter', 'all');
            }

            tab.addEventListener('click', () => {
                // Удаляем активный класс у всех табов в этой группе
                tabs.forEach(t => t.classList.remove('active'));

                // Добавляем активный класс текущему табу
                tab.classList.add('active');

                // Логика фильтрации товаров
                const filter = tab.getAttribute('data-filter');

                products.forEach(product => {
                    if (filter === 'all') {
                        product.style.display = 'block';
                    } else {
                        const subCategory = product.getAttribute('data-sub-category');

                        if (subCategory === filter) {
                            product.style.display = 'block';

                            // Анимация появления
                            product.style.opacity = '0';
                            setTimeout(() => {
                                product.style.transition = 'opacity 0.3s ease-in-out';
                                product.style.opacity = '1';
                            }, 50);
                        } else {
                            product.style.display = 'none';
                        }
                    }
                });

                // Проверяем, есть ли видимые товары
                const visibleProducts = Array.from(products).filter(p => p.style.display !== 'none');

                if (visibleProducts.length === 0) {
                    // Если нет видимых товаров, показываем сообщение
                    let emptyMessage = productGrid.querySelector('.empty-message');

                    if (!emptyMessage) {
                        emptyMessage = document.createElement('p');
                        emptyMessage.className = 'empty-message';
                        emptyMessage.style.textAlign = 'center';
                        emptyMessage.style.gridColumn = '1 / -1';
                        emptyMessage.style.padding = '2rem';
                        emptyMessage.style.color = '#666';
                        productGrid.appendChild(emptyMessage);
                    }

                    emptyMessage.textContent = 'В данной категории товары отсутствуют';
                    emptyMessage.style.display = 'block';
                } else {
                    // Если есть видимые товары, скрываем сообщение
                    const emptyMessage = productGrid.querySelector('.empty-message');
                    if (emptyMessage) {
                        emptyMessage.style.display = 'none';
                    }
                }
            });
        });
    });
});
    </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
</body>
</html>